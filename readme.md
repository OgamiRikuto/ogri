# ogri

ogriã¯**æ–‡ç« ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹**ã‚ˆã†ã«è¨­è¨ˆã•ã‚ŒãŸå‹•çš„å‹ä»˜ã‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã™ã€‚  
è‹±æ–‡ã®ã‚ˆã†ãªè‡ªç„¶ãªæ§‹æ–‡ã‚’æŒã¡ã€è¨˜å·ã®å…¥åŠ›ã‚’ãªã‚‹ã¹ãå°‘ãªãã€æµã‚Œã‚‹ã‚ˆã†ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚

## ğŸ’¡ç‰¹å¾´

* **Shiftã‚­ãƒ¼ã®æ’é™¤**: æ§‹æ–‡ã¯ã™ã¹ã¦å°æ–‡å­—ã¨è¨˜å·(`,`, `.`)ã§ã‹ã‘ã‚‹ã‚ˆã†ã«æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚
    * *æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«(`"`)ã®å…¥åŠ›æ™‚ã«Shiftã‚­ãƒ¼ãŒå¿…è¦ã§ã™ã€‚*
    * *æ¼”ç®—å­(`==`, `!=`, `<`, `>`, `<=`, `>=`, `+`, `-`, `*`, `/`, `%`)ã¯ãã®ã¾ã¾æ›¸ãã“ã¨ã‚‚ã§ãã¾ã™ã€‚*
* **è‹±èªã®ã‚ˆã†ãªæ–‡**: å…¨ã¦ã®æ–‡ã¯ãƒ”ãƒªã‚ªãƒ‰`.`ã§çµ‚ã‚ã‚Šã¾ã™ã€‚
* **ã‚¹ãƒãƒ¼ãƒˆãªä»£å…¥**: å˜æ•°ä»£å…¥ã® `is` ã¨ã€ãƒªã‚¹ãƒˆåŒ–ãƒ»è¤‡æ•°ä»£å…¥ã® `are` ã‚’ã€è‹±èªã®æ–‡æ³•ã«åˆã‚ã›ã¦ä½¿ã„åˆ†ã‘ã¾ã™ã€‚

## ğŸš€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

### å‰ææ¡ä»¶
Cã‚³ãƒ³ãƒ‘ã‚¤ãƒ©(clang/gcc), Bison, Flex ãŒå¿…è¦ã§ã™ã€‚

### ãƒ“ãƒ«ãƒ‰ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™ã€‚
```bash
git clone https://github.com/OgamiRikuto/ogri.git
cd ogri
```
2. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚
```bash
make
```
3. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«(ä»»æ„): `ogri`ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚·ã‚¹ãƒ†ãƒ ã«ç™»éŒ²ã—ã¾ã™(sudoã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™)ã€‚
    * `/usr/local/bin`ã«å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã„ã¾ã™ã€‚
```bash
sudo make install
```



## ğŸ“–ä½¿ã„æ–¹
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå ´åˆã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§ã©ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã„ã¦ã‚‚
```bash
ogri
```
ã§å®Ÿè¡Œã§ãã¾ã™ã€‚  
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„å ´åˆã¯ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¦
```bash
./ogri
```
ã§å®Ÿè¡Œã§ãã¾ã™ã€‚

ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
ogri examples/main.ogri
```

## ğŸ—’ï¸æ§‹æ–‡ã‚¬ã‚¤ãƒ‰
### 1. å¤‰æ•°ã¨ä»£å…¥(`is`ã¨`are`)
ogriã§ã¯ã€å˜ä¸€ã®å€¤ã®ä»£å…¥ã¨ã€ãƒªã‚¹ãƒˆã‚„è¤‡æ•°å¤‰æ•°ã®æ‰±ã„ã§`is`ã¨`are`ã‚’ä½¿ã„åˆ†ã‘ã¾ã™ã€‚
```
// å˜ä¸€ä»£å…¥ (is)
name is "Alice".
age is 20.

// ãƒªã‚¹ãƒˆä½œæˆ (are)
numbers are 1, 2, 3.
single_list are 10. // å€¤ãŒä¸€ã¤ã§ã‚‚ãƒªã‚¹ãƒˆ[10]ãŒä½œã‚‰ã‚Œã¾ã™ã€‚

// ã‚¢ãƒ³ãƒ‘ãƒƒã‚¯ / è¤‡æ•°ä»£å…¥ (are)
x, y are 10, 20.    // x = 10, y = 20 ã¨ä»£å…¥ã•ã‚Œã¾ã™ã€‚
```

### 2. å‡ºåŠ›ã¨fæ–‡å­—åˆ—
å‡ºåŠ›ã«ã¯`say with`ã¨`says with`ã‚’ä½¿ã„ã¾ã™ã€‚fæ–‡å­—åˆ—`f"..."`ã®ä¸­ã§ã¯è§’æ‹¬å¼§`[...]`ã‚’ä½¿ã£ã¦å¤‰æ•°ã‚’åŸ‹ã‚è¾¼ã‚ã¾ã™ã€‚
```
say with "Hello World". // say ã¯å‡ºåŠ›ã«æ”¹è¡Œã‚’å«ã¿ã¾ã™ã€‚
says with "Hello ogri\n". // says ã¯å‡ºåŠ›ã«æ”¹è¡Œã‚’å«ã¿ã¾ã›ã‚“ã€‚
say with f"My name is [name] and I am [age] years old.".
```

### 3. åˆ¶å¾¡æ§‹æ–‡
æ¡ä»¶åˆ†å²(`when`/`otherwise`):
```
when age is larger than 18,
    say with "You are an adult.".
otherwise when age is same as 18,
    say with "Happy Birthday!".
otherwise,
    say with "You are a minor.".
```

ç¹°ã‚Šè¿”ã—(`repeat`):
```
// Foreach ãƒ«ãƒ¼ãƒ—
colors are "Red", "Green", "Blue".
repeat color foreach colors that
    say with f"Color: [color].".

// Until ãƒ«ãƒ¼ãƒ— (æ¡ä»¶ãŒæº€ãŸã•ã‚Œã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™)
count is 0.
repeat until count is larger than 5 that
    say with count.
    count is count plus 1.
```

### 4. æ¼”ç®—å­
è¨˜å·ã®ä»£ã‚ã‚Šã«å˜èªã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚  
| ogri | æ„å‘³ | ä¸€èˆ¬çš„ãªè¨˜å· |
| --- | --- | --- |
| plus | è¶³ã™ | `+` |
| minus | å¼•ã | `-` |
| times | æ›ã‘ã‚‹ | `*` |
| divided by | å‰²ã‚‹ | `/` |
| remainder | ã‚ã¾ã‚Š | `%` |
| is same as | ç­‰ã—ã„ | `==` |
| is not same as | ç­‰ã—ããªã„ | `!=` |
| is less than | æœªæº€ | `<` |
| is larger than | ã‚ˆã‚Šå¤§ãã„ | `>` |
| is less | ä»¥ä¸‹ | `<=` |
| is larger | ä»¥ä¸Š | `>=` |

### 5. é–¢æ•°å®šç¾©ã¨é–¢æ•°å‘¼ã³å‡ºã—
`define ... that`ã‚’ä½¿ç”¨ã—ã¦é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚  
é–¢æ•°ã®å‘¼ã³å‡ºã—ã«ã¯`with`ã‚’ç”¨ã„ã¾ã™ã€‚
```
// å¼•æ•°ãªã—ã®é–¢æ•°å®šç¾©
define greet that
    say with "Hello!".

greet with. // å¼•æ•°ãŒãªãã¦ã‚‚ with ã¯å¿…è¦ã§ã™ã€‚

// å¼•æ•°ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ using ã‚’ä½¿ã„ã¾ã™ã€‚
define greet_with_name using name that
    say with f"Hello, [name]".

greet_with_name with "Bob".

gn is greet_with_name.  // withã‚’ã¤ã‘ãªã„ã“ã¨ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚
gn with "Bob".
```

### 6. ãã®ä»–
ä»•æ§˜ã®è©³ç´°ã¯ã€[examples/manual.ogri](examples/manual.ogri) ã«ã¦**å®Ÿè¡Œå¯èƒ½ãªãƒãƒ‹ãƒ¥ã‚¢ãƒ«**ã¨ã—ã¦ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚  
ã‚¹ãƒ©ã‚¤ã‚¹ã‚„çµ„ã¿è¾¼ã¿é–¢æ•°ã®ä½¿ã„æ–¹ã‚‚ç¶²ç¾…ã•ã‚Œã¦ã„ã‚‹ãŸãœã²ä¸€åº¦å®Ÿè¡Œã—ã¦æŒ™å‹•ã‚’ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚

## ğŸ§©ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰: FizzBuzz
```
define fizzbuzz using limit that
    number is 1.

    repeat until number is larger than limit that
        is_fizz is number remainder 3 is same as 0.
        is_buzz is number remainder 5 is same as 0.

        when is_fizz and is_buzz,
            say with "FizzBuzz".
        otherwise when is_fizz,
            say with "Fizz".
        otherwise when is_buzz,
            say with "Buzz".
        otherwise,
            say with number.
        
        number is number plus 1.

fizzbuzz with 20.
```

## Syntax Diagram
æœ¬è¨€èªã®æ§‹æ–‡å®šç¾©(Syntac diagram / EBNF) ã¯ [syntax/diagram.md](syntax/diagram.md)ã§ç¢ºèªã§ãã¾ã™ã€‚

